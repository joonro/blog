<!DOCTYPE html>
<html prefix="og: http://ogp.me/ns# article: http://ogp.me/ns/article# " lang="en">
<head>
<meta charset="utf-8">
<meta name="description" content="org file for my blog">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>How to set up inverse and forward search in LyX for Windows | Joon's Blog</title>
<link href="../../assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<link href="https://fonts.googleapis.com/css?family=Playfair+Display:700,900" rel="stylesheet">
<meta name="theme-color" content="#5670d4">
<meta name="generator" content="Nikola (getnikola.com)">
<link rel="alternate" type="application/rss+xml" title="RSS" href="../../rss.xml">
<link rel="canonical" href="http://joonro.github.io/blog/posts/inverse-and-forward-search-lyx-windows/">
<!--[if lt IE 9]><script src="../../assets/js/html5.js"></script><![endif]--><link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.5/styles/github.min.css">
<script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.5/highlight.min.js"></script><script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.5/languages/lisp.min.js"></script><script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.5/languages/powershell.min.js"></script><script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.5/languages/r.min.js"></script><script>hljs.initHighlightingOnLoad();</script><script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-38842404-1', 'auto');
  ga('send', 'pageview');

</script><meta name="author" content="Joon Ro">
<link rel="prev" href="../installing-gsl-and-cythongsl-in-windows/" title="Installing GNU Scientific Library (GSL) and CythonGSL in Windows" type="text/html">
<link rel="next" href="../toast-notifications-org-mode-windows/" title="Native desktop (toast) notifications for org-mode appointments in Windows" type="text/html">
<meta property="og:site_name" content="Joon's Blog">
<meta property="og:title" content="How to set up inverse and forward search in LyX for Windows">
<meta property="og:url" content="http://joonro.github.io/blog/posts/inverse-and-forward-search-lyx-windows/">
<meta property="og:description" content="org file for my blog">
<meta property="og:type" content="article">
<meta property="article:published_time" content="2015-10-10T00:00:00-05:00">
<meta property="article:tag" content="autohotkey">
<meta property="article:tag" content="howto">
<meta property="article:tag" content="latex">
<meta property="article:tag" content="lyx">
<meta property="article:tag" content="setting">
<meta property="article:tag" content="windows">
</head>
<body>
<a href="#content" class="sr-only sr-only-focusable">Skip to main content</a>

<!-- Header and menu bar -->
<div class="container">
      <header class="blog-header py-3"><div class="row nbb-header align-items-center">
          <div class="col-md-3 col-xs-2 col-sm-2" style="width: auto;">
            <button class="navbar-toggler navbar-light bg-light nbb-navbar-toggler" type="button" data-toggle="collapse" data-target=".bs-nav-collapsible" aria-controls="bs-navbar" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse bs-nav-collapsible bootblog4-search-form-holder">
                
            </div>
        </div>
          <div class="col-md-6 col-xs-10 col-sm-10 bootblog4-brand" style="width: auto;">
            <a class="navbar-brand blog-header-logo text-dark" href="http://joonro.github.io/blog/">

            <span id="blog-title">Joon's Blog</span>
        </a>
          </div>
            <div class="col-md-3 justify-content-end align-items-center bs-nav-collapsible collapse flex-collapse bootblog4-right-nav">
            <nav class="navbar navbar-light bg-white"><ul class="navbar-nav bootblog4-right-nav">
<li class="nav-item">
    <a href="index.rst" id="sourcelink" class="nav-link">Source</a>
    </li>


                    
            </ul></nav>
</div>
    </div>
</header><nav class="navbar navbar-expand-md navbar-light bg-white static-top"><div class="collapse navbar-collapse bs-nav-collapsible" id="bs-navbar">
            <ul class="navbar-nav nav-fill d-flex w-100">
<li class="nav-item">
<a href="../../archive.html" class="nav-link">Archive</a>
                </li>
<li class="nav-item">
<a href="../../categories/index.html" class="nav-link">Tags and Categories</a>
                </li>
<li class="nav-item">
<a href="../../rss.xml" class="nav-link">RSS feed</a>

                
            </li>
</ul>
</div>
<!-- /.navbar-collapse -->
</nav>
</div>

<div class="container" id="content" role="main">
    <div class="body-content">
        <!--Body content-->
        
        
        
<article class="post-text h-entry hentry postpage" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title" itemprop="headline name"><a href="." class="u-url">How to set up inverse and forward search in LyX for Windows</a></h1>

        <div class="metadata">
            <p class="byline author vcard p-author h-card"><span class="byline-name fn p-name" itemprop="author">
                    Joon Ro
            </span></p>
            <p class="dateline">
            <a href="." rel="bookmark">
            <time class="published dt-published" datetime="2015-10-10T00:00:00-05:00" itemprop="datePublished" title="2015-10-10 00:00">2015-10-10 00:00</time><span class="updated"> (updated
                    <time class="updated dt-updated" datetime="2018-07-16T12:00:00-05:00" itemprop="dateUpdated" title="2018-07-16 12:00">2018-07-16 12:00</time>)</span>
            </a>
            </p>
                <p class="commentline">
        
    <a href="#disqus_thread" data-disqus-identifier="cache/posts/inverse-and-forward-search-lyx-windows.html">Comments</a>


            
        </p>
<p class="sourceline"><a href="index.rst" class="sourcelink">Source</a></p>

        </div>
        

    </header><div class="e-content entry-content" itemprop="articleBody text">
    <div>
<p>I describe how to set up <a class="reference external" href="https://en.wikipedia.org/wiki/Inverse_search">inverse</a> and forward search in LyX for the Windows
environment, with <a class="reference external" href="http://www.sumatrapdfreader.org/free-pdf-reader.html">SumatraPDF</a> as the pdf viewer. Inverse search lets you
quickly move to the corresponding part of a LyX (or LaTeX) source from its pdf
output, typically by clicking on the text in the pdf viewer. Forward search
works in the opposite direction; from the LyX (or LaTeX) source, you can
invoke forward search to make the pdf viewer scroll through the pdf document
so the output counterpart of the source is shown. They are very useful
especially when you are editing a long document. Most of the instructions
overlap with those found at <a class="reference external" href="http://wiki.lyx.org/LyX/SyncTeX#toc3">http://wiki.lyx.org/LyX/SyncTeX#toc3</a>.</p>
<!-- TEASER_END: click to read the rest of the article -->
<div class="section" id="lyx">
<h2>LyX</h2>
<ol class="arabic simple">
<li><p>Set <code class="docutils literal">Tools</code> &gt; <code class="docutils literal">Preferences</code> &gt; <code class="docutils literal">Paths</code> &gt; <code class="docutils literal">LyxServer pipe</code> to
<code class="docutils literal"><span class="pre">\\.\pipe\lyxpipe</span></code>.</p></li>
<li><p>In <code class="docutils literal">Document</code> &gt; <code class="docutils literal">Settings</code> &gt; <code class="docutils literal">Output</code>, check <code class="docutils literal">Synchronize with output</code>. (this is checked by default)</p></li>
</ol>
</div>
<div class="section" id="scripts">
<h2>Scripts</h2>
<p>Create a batch file named <code class="docutils literal">lyxeditor.cmd</code> with the following contents and save
it to one of the locations in your <code class="docutils literal">PATH</code> Windows environmental variable so
the pdf editor can call it:</p>
<pre class="code bat"><a name="rest_code_f4871d8a2ead41aea6dcc0bd07e805d3-1"></a><span class="p">@</span><span class="k">echo</span> off
<a name="rest_code_f4871d8a2ead41aea6dcc0bd07e805d3-2"></a><span class="k">SETLOCAL</span> enabledelayedexpansion
<a name="rest_code_f4871d8a2ead41aea6dcc0bd07e805d3-3"></a><span class="k">set</span> <span class="nv">file</span><span class="p">=</span><span class="nv">%1</span>
<a name="rest_code_f4871d8a2ead41aea6dcc0bd07e805d3-4"></a><span class="k">set</span> <span class="nv">row</span><span class="p">=</span><span class="nv">%2</span>
<a name="rest_code_f4871d8a2ead41aea6dcc0bd07e805d3-5"></a><span class="c1">REM remove quotes from variables</span>
<a name="rest_code_f4871d8a2ead41aea6dcc0bd07e805d3-6"></a><span class="k">set</span> <span class="nv">file</span><span class="p">=</span><span class="nv">!file:"=!</span>
<a name="rest_code_f4871d8a2ead41aea6dcc0bd07e805d3-7"></a><span class="k">set</span> <span class="nv">row</span><span class="p">=</span><span class="nv">!row:"=!</span>
<a name="rest_code_f4871d8a2ead41aea6dcc0bd07e805d3-8"></a><span class="nv">%comspec%</span> /q /c (@echo LYXCMD:revdvi:server-goto-file-row:<span class="nv">%file%</span> <span class="nv">%row%</span>)<span class="p">&gt;</span> \\.\pipe\lyxpipe.in<span class="p">&amp;&amp;</span><span class="k">type</span> \\.\pipe\lyxpipe.out
<a name="rest_code_f4871d8a2ead41aea6dcc0bd07e805d3-9"></a><span class="k">endlocal</span>
</pre>
<p>The above cmd works well, but it shows an annoying black cmd window when you
invoke the script. With a simple <a class="reference external" href="http://ahkscript.org">AutoHotkey</a> script, one can not only suppress
this window but also activate the LyX window after the inverse search.</p>
<p>Create an AutoHotkey script named <code class="docutils literal"><span class="pre">lyx-inverse-search.ahk</span></code> with the following
code and save it to the same location at <code class="docutils literal">lyxeditor.cmd</code> and compile it with
the AutoHotkey to generate <code class="docutils literal"><span class="pre">lyx-inverse-search.exe</span></code>:</p>
<pre class="code ahk"><a name="rest_code_c387269ae4bf4859bc695d2f48a11b69-1"></a><span class="nb">SetTitleMatchMode</span><span class="p">,</span> <span class="n">RegEx</span>
<a name="rest_code_c387269ae4bf4859bc695d2f48a11b69-2"></a><span class="nb">Run</span><span class="p">,</span> <span class="n">lyxeditor</span><span class="o">.</span><span class="n">cmd</span> <span class="s">"%1%"</span> <span class="s">"%2%"</span><span class="p">,,</span> <span class="n">Hide</span>
<a name="rest_code_c387269ae4bf4859bc695d2f48a11b69-3"></a><span class="nb">WinActivate</span><span class="p">,</span> <span class="n">ahk_exe</span> <span class="n">lyx</span><span class="o">.</span><span class="n">exe</span><span class="p">,,,</span>
</pre>
<p>If you don't have AutoHotkey installed, you can also download the pre-compiled
<a class="reference external" href="https://github.com/joonro/blog/raw/gh-pages/assets/lyx-inverse-search.zip">file</a>.</p>
</div>
<div class="section" id="id1">
<h2>SumatraPDF</h2>
<p>SumatraPDF is good because you can recompile your LaTeX document while the pdf
is open with SumatraPDF and the viewer will automatically refresh the pdf
file. Some pdf viewers will lock the pdf file and will not let you
re-generate the pdf file unless you close the file first. It also supports
inverse and forward search nicely.</p>
<ol class="arabic simple">
<li><p>Download and install <a class="reference external" href="http://blog.kowalczyk.info/software/sumatrapdf/download-free-pdf-viewer.html">Sumatra PDF</a>.</p></li>
<li><p>In LyX, go to <code class="docutils literal">Tools</code> &gt; <code class="docutils literal">Preferences</code> &gt; <code class="docutils literal">Paths</code> and append the install location
of SumatraPDF to <code class="docutils literal">PATH prefix</code>. For example, <code class="docutils literal"><span class="pre">C:\Program</span> Files\SumatraPDF</code>.</p></li>
</ol>
<div class="section" id="inverse-search">
<h3>Inverse Search</h3>
<p>In <code class="docutils literal">Tools</code> &gt; <code class="docutils literal">Preferences</code> &gt; <code class="docutils literal">File Handling</code> &gt; <code class="docutils literal">File Formats</code>, select <code class="docutils literal">PDF (pdflatex)</code> from the list <code class="docutils literal">Format</code> and modify <code class="docutils literal">Viewer</code> to the following
(including the quotes). If you have the compiled AutoHotkey script from above,
use the following instead (recommended):</p>
<pre class="code bat"><a name="rest_code_983d3d80bdcb46ec9d5f3d3d79198eb7-1"></a>SumatraPDF -inverse-search <span class="s2">"lyx-inverse-search.exe \"</span><span class="nv">%f\" \"%</span>l\<span class="s2">""</span>
</pre>
<p>Otherwise, use:</p>
<pre class="code bat"><a name="rest_code_b60257e3454d4391a89876dc78b4042c-1"></a>SumatraPDF -inverse-search <span class="s2">"lyxeditor.cmd \"</span><span class="nv">%f\" \"%</span>l\<span class="s2">""</span>
</pre>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If the folder containing <code class="docutils literal">lyxeditor.cmd</code> and <code class="docutils literal"><span class="pre">lyx-inverse-search.exe</span></code> is not
in your <code class="docutils literal">PATH</code> environmental variable, then you have to specify their full path
here.</p>
</div>
<p>Now, once you do to <code class="docutils literal">Document</code> -&gt; <code class="docutils literal">View [PDF (pdflatex)]</code> or <code class="docutils literal">View Master Document</code> in
LyX to compile your <code class="docutils literal">.lyx</code> file and invoke SumatraPDF to view the resulting
pdf, you can double-click on any text on the body of the pdf document to go to the
corresponding text in LyX.</p>
</div>
<div class="section" id="forward-search">
<h3>Forward Search</h3>
<p>In LyX, go to <code class="docutils literal">Tools</code> &gt; <code class="docutils literal">Preferences</code> &gt; <code class="docutils literal">Output</code>, and enter the following in
<code class="docutils literal">PDF command</code> under <code class="docutils literal">Forward Search</code> section:</p>
<pre class="code bat"><a name="rest_code_4640eace456049d885b9c667f3d121ed-1"></a>SumatraPDF -reuse-instance $$o -forward-search $$t $$n
</pre>
<p>Now, if you click on <code class="docutils literal">Forward Search</code> in the <code class="docutils literal">Navigate</code> menu in LyX, SumatraPDF
will scroll the pdf document to show the text corresponding to the text in LyX
where your cursor is and highlight the line.</p>
</div>
</div>
<div class="section" id="changelog">
<h2>Changelog</h2>
<div class="section" id="mon">
<h3>[2018-07-16 Mon]</h3>
<ul class="simple">
<li><p>Update AutoHotkey script to correctly identify LyX window to activate</p></li>
</ul>
</div>
</div>
</div>
    </div>
    <aside class="postpromonav"><nav><ul itemprop="keywords" class="tags">
<li><a class="tag p-category" href="../../categories/autohotkey/" rel="tag">autohotkey</a></li>
            <li><a class="tag p-category" href="../../categories/howto/" rel="tag">howto</a></li>
            <li><a class="tag p-category" href="../../categories/latex/" rel="tag">latex</a></li>
            <li><a class="tag p-category" href="../../categories/lyx/" rel="tag">lyx</a></li>
            <li><a class="tag p-category" href="../../categories/setting/" rel="tag">setting</a></li>
            <li><a class="tag p-category" href="../../categories/windows/" rel="tag">windows</a></li>
        </ul>
<ul class="pager hidden-print">
<li class="previous">
                <a href="../installing-gsl-and-cythongsl-in-windows/" rel="prev" title="Installing GNU Scientific Library (GSL) and CythonGSL in Windows">Previous post</a>
            </li>
            <li class="next">
                <a href="../toast-notifications-org-mode-windows/" rel="next" title="Native desktop (toast) notifications for org-mode appointments in Windows">Next post</a>
            </li>
        </ul></nav></aside><section class="comments hidden-print"><h2>Comments</h2>
        
        
        <div id="disqus_thread"></div>
        <script>
        var disqus_shortname ="joon-blog",
            disqus_url="http://joonro.github.io/blog/posts/inverse-and-forward-search-lyx-windows/",
        disqus_title="How to set up inverse and forward search in LyX for Windows",
        disqus_identifier="cache/posts/inverse-and-forward-search-lyx-windows.html",
        disqus_config = function () {
            this.language = "en";
        };
        (function() {
            var dsq = document.createElement('script'); dsq.async = true;
            dsq.src = 'https://' + disqus_shortname + '.disqus.com/embed.js';
            (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
        })();
    </script><noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a>
</noscript>
    <a href="https://disqus.com" class="dsq-brlink" rel="nofollow">Comments powered by <span class="logo-disqus">Disqus</span></a>


        </section></article><script>var disqus_shortname="joon-blog";(function(){var a=document.createElement("script");a.async=true;a.src="https://"+disqus_shortname+".disqus.com/count.js";(document.getElementsByTagName("head")[0]||document.getElementsByTagName("body")[0]).appendChild(a)}());</script><!--End of body content--><footer id="footer">
            Contents © 2020 <a href="mailto:joon.ro@outlook.com">Joon Ro</a> - Powered by <a href="http://getnikola.com" rel="nofollow">Nikola</a> 
            
            
        </footer>
</div>
</div>


        <script src="../../assets/js/all-nocdn.js"></script><script>
    baguetteBox.run('div#content', {
        ignoreClass: 'islink',
        captions: function(element) {
            return element.getElementsByTagName('img')[0].alt;
    }});
    </script>
</body>
</html>
