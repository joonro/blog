<!DOCTYPE html>
<html prefix="og: http://ogp.me/ns# article: http://ogp.me/ns/article# " lang="en">
<head>
<meta charset="utf-8">
<base href="http://joonro.github.io/blog/posts/inverse-and-forward-search-lyx-windows.html">
<meta name="description" content="org file for my blog">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>How to set up inverse and forward search in LyX for Windows | Joon's Blog</title>
<link href="../assets/css/bootstrap.min.css" rel="stylesheet" type="text/css">
<link href="../assets/css/rst.css" rel="stylesheet" type="text/css">
<link href="../assets/css/code.css" rel="stylesheet" type="text/css">
<link href="../assets/css/colorbox.css" rel="stylesheet" type="text/css">
<link href="../assets/css/theme.css" rel="stylesheet" type="text/css">
<meta content="#5670d4" name="theme-color">
<link rel="alternate" type="application/rss+xml" title="RSS" href="../rss.xml">
<link rel="canonical" href="http://joonro.github.io/blog/posts/inverse-and-forward-search-lyx-windows.html">
<!--[if lt IE 9]><script src="../assets/js/html5.js"></script><![endif]--><link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.5/styles/github.min.css">
<script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.5/highlight.min.js"></script><script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.5/languages/lisp.min.js"></script><script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.5/languages/powershell.min.js"></script><script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.5/languages/r.min.js"></script><script>hljs.initHighlightingOnLoad();</script><script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-38842404-1', 'auto');
  ga('send', 'pageview');

</script><meta name="description" itemprop="description" content="org file for my blog">
<meta name="author" content="Joon Ro">
<link rel="prev" href="installing-gsl-and-cythongsl-in-windows.html" title="Installing GNU Scientific Library (GSL) and CythonGSL in Windows" type="text/html">
<link rel="next" href="toast-notifications-org-mode-windows.html" title="Native desktop (toast) notifications for org-mode appointments in Windows" type="text/html">
<meta property="og:site_name" content="Joon's Blog">
<meta property="og:title" content="How to set up inverse and forward search in LyX for Windows">
<meta property="og:url" content="http://joonro.github.io/blog/posts/inverse-and-forward-search-lyx-windows.html">
<meta property="og:description" content="org file for my blog">
<meta property="og:type" content="article">
<meta property="article:published_time" content="2015-10-10T00:00:00-05:00">
<meta property="article:tag" content="autohotkey">
<meta property="article:tag" content="howto">
<meta property="article:tag" content="latex">
<meta property="article:tag" content="lyx">
<meta property="article:tag" content="setting">
<meta property="article:tag" content="windows">
</head>
<body>
<a href="#content" class="sr-only sr-only-focusable">Skip to main content</a>

<!-- Menubar -->

<nav class="navbar navbar-inverse navbar-static-top"><div class="container">
<!-- This keeps the margins nice -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-navbar" aria-controls="bs-navbar" aria-expanded="false">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="http://joonro.github.io/blog/">

                <span id="blog-title">Joon's Blog</span>
            </a>
        </div>
<!-- /.navbar-header -->
        <div class="collapse navbar-collapse" id="bs-navbar" aria-expanded="false">
            <ul class="nav navbar-nav">
<li>
<a href="../archive.html">Archive</a>
                </li>
<li>
<a href="../categories/index.html">Tags and Categories</a>
                </li>
<li>
<a href="../rss.xml">RSS feed</a>

                
            </li>
</ul>
<ul class="nav navbar-nav navbar-right">
<li>
    <a href="inverse-and-forward-search-lyx-windows.rst" id="sourcelink">Source</a>
    </li>

                
            </ul>
</div>
<!-- /.navbar-collapse -->
    </div>
<!-- /.container -->
</nav><!-- End of Menubar --><div class="container" id="content" role="main">
    <div class="body-content">
        <!--Body content-->
        <div class="row">
            
            
<article class="post-text h-entry hentry postpage" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title" itemprop="headline name"><a href="#" class="u-url">How to set up inverse and forward search in LyX for Windows</a></h1>

        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn">
                    Joon Ro
            </span></p>
            <p class="dateline"><a href="#" rel="bookmark"><time class="published dt-published" datetime="2015-10-10T00:00:00-05:00" itemprop="datePublished" title="2015-10-10 00:00">2015-10-10 00:00</time></a></p>
                <p class="commentline">
        
    <a href="inverse-and-forward-search-lyx-windows.html#disqus_thread" data-disqus-identifier="cache/posts/inverse-and-forward-search-lyx-windows.html">Comments</a>


            
        </p>
<p class="sourceline"><a href="inverse-and-forward-search-lyx-windows.rst" id="sourcelink">Source</a></p>

                <meta name="description" itemprop="description" content="org file for my blog">
</div>
        

    </header><div class="e-content entry-content" itemprop="articleBody text">
    <div>
<p>I describe how to set up <a class="reference external" href="https://en.wikipedia.org/wiki/Inverse_search">inverse</a> and forward search in LyX for the Windows
environment, with <a class="reference external" href="http://www.sumatrapdfreader.org/free-pdf-reader.html">SumatraPDF</a> as the pdf viewer. Inverse search lets you
quickly move to the corresponding part of a LyX (or LaTeX) source from its pdf
output, typically by clicking on the text in the pdf viewer. Forward search
works in the opposite direction; from the LyX (or LaTeX) source, you can
invoke forward search to make the pdf viewer scroll through the pdf document
so the output counterpart of the source is shown. They are very useful
especially when you are editing a long document. Most of the instructions
overlap with those found at <a class="reference external" href="http://wiki.lyx.org/LyX/SyncTeX#toc3">http://wiki.lyx.org/LyX/SyncTeX#toc3</a>.</p>
<!-- TEASER_END: click to read the rest of the article -->
<div class="section" id="lyx">
<h2>LyX</h2>
<ol class="arabic simple">
<li>Set <tt class="docutils literal">Tools</tt> &gt; <tt class="docutils literal">Preferences</tt> &gt; <tt class="docutils literal">Paths</tt> &gt; <tt class="docutils literal">LyxServer pipe</tt> to
<tt class="docutils literal"><span class="pre">\\.\pipe\lyxpipe</span></tt>.</li>
<li>In <tt class="docutils literal">Document</tt> &gt; <tt class="docutils literal">Settings</tt> &gt; <tt class="docutils literal">Output</tt>, check <tt class="docutils literal">Synchronize with output</tt>. (this is checked by default)</li>
</ol>
</div>
<div class="section" id="scripts">
<h2>Scripts</h2>
<p>Create a batch file named <tt class="docutils literal">lyxeditor.cmd</tt> with the following contents and save
it to one of the locations in your <tt class="docutils literal">PATH</tt> Windows environmental variable so
the pdf editor can call it:</p>
<pre class="code bat"><a name="rest_code_4a34f75eb524433daf25f982b168a59b-1"></a><span class="p">@</span><span class="k">echo</span> <span class="k">off</span>
<a name="rest_code_4a34f75eb524433daf25f982b168a59b-2"></a><span class="k">SETLOCAL</span> enabledelayedexpansion
<a name="rest_code_4a34f75eb524433daf25f982b168a59b-3"></a><span class="k">set</span> <span class="nv">file</span><span class="o">=</span><span class="nv">%1</span>
<a name="rest_code_4a34f75eb524433daf25f982b168a59b-4"></a><span class="k">set</span> <span class="nv">row</span><span class="o">=</span><span class="nv">%2</span>
<a name="rest_code_4a34f75eb524433daf25f982b168a59b-5"></a><span class="c">REM remove quotes from variables</span>
<a name="rest_code_4a34f75eb524433daf25f982b168a59b-6"></a><span class="k">set</span> <span class="nv">file</span><span class="o">=</span>!file:"<span class="o">=</span>!
<a name="rest_code_4a34f75eb524433daf25f982b168a59b-7"></a><span class="k">set</span> <span class="nv">row</span><span class="o">=</span>!row:"<span class="o">=</span>!
<a name="rest_code_4a34f75eb524433daf25f982b168a59b-8"></a><span class="nv">%comspec%</span> <span class="n">/q</span> <span class="n">/c</span> (@<span class="k">echo</span> LYXCMD:revdvi<span class="nl">:server</span>-<span class="k">goto</span>-file-row:<span class="nv">%file%</span> <span class="nv">%row%</span>)&gt; \\.\pipe\lyxpipe.in&amp;&amp;type \\.\pipe\lyxpipe.out
<a name="rest_code_4a34f75eb524433daf25f982b168a59b-9"></a><span class="k">endlocal</span>
</pre>
<p>The above cmd works well, but it shows an annoying black cmd window when you
invoke the script. With a simple <a class="reference external" href="http://ahkscript.org">AutoHotkey</a> script, one can not only suppress
this window but also activate the LyX window after the inverse search.</p>
<p>Create an AutoHotkey script named <tt class="docutils literal"><span class="pre">lyx-inverse-search.ahk</span></tt> with the following
code and save it to the same location at <tt class="docutils literal">lyxeditor.cmd</tt> and compile it with
the AutoHotkey to generate <tt class="docutils literal"><span class="pre">lyx-inverse-search.exe</span></tt>:</p>
<pre class="code ahk"><a name="rest_code_8d77d248cc0c4261bdf8e4bb2d615d40-1"></a><span class="nb">SetTitleMatchMode</span><span class="p">,</span> <span class="n">RegEx</span>
<a name="rest_code_8d77d248cc0c4261bdf8e4bb2d615d40-2"></a><span class="nb">Run</span><span class="p">,</span> <span class="n">lyxeditor</span><span class="o">.</span><span class="n">cmd</span> <span class="s">"%1%"</span> <span class="s">"%2%"</span><span class="p">,,</span> <span class="n">Hide</span>
<a name="rest_code_8d77d248cc0c4261bdf8e4bb2d615d40-3"></a><span class="nb">WinActivate</span><span class="p">,</span> <span class="o">^</span><span class="n">LyX</span><span class="o">:</span><span class="p">,,,</span>
</pre>
<p>If you don't have AutoHotkey installed, you can also download the pre-compiled
<a class="reference external" href="https://dl.dropboxusercontent.com/u/561594/lyx-inverse-search.zip">exe</a>.</p>
</div>
<div class="section" id="id1">
<h2>SumatraPDF</h2>
<p>SumatraPDF is good because you can recompile your LaTeX document while the pdf
is open with SumatraPDF and the viewer will automatically refresh the pdf
file. Some pdf viewers will lock the pdf file and will not let you
re-generate the pdf file unless you close the file first. It also supports
inverse and forward search nicely.</p>
<ol class="arabic simple">
<li>Download and install <a class="reference external" href="http://blog.kowalczyk.info/software/sumatrapdf/download-free-pdf-viewer.html">Sumatra PDF</a>.</li>
<li>In LyX, go to <tt class="docutils literal">Tools</tt> &gt; <tt class="docutils literal">Preferences</tt> &gt; <tt class="docutils literal">Paths</tt> and append the install location
of SumatraPDF to <tt class="docutils literal">PATH prefix</tt>. For example, <tt class="docutils literal"><span class="pre">C:\Program</span> Files\SumatraPDF</tt>.</li>
</ol>
<div class="section" id="inverse-search">
<h3>Inverse Search</h3>
<p>In <tt class="docutils literal">Tools</tt> &gt; <tt class="docutils literal">Preferences</tt> &gt; <tt class="docutils literal">File Handling</tt> &gt; <tt class="docutils literal">File Formats</tt>, select <tt class="docutils literal">PDF
(pdflatex)</tt> from the list <tt class="docutils literal">Format</tt> and modify <tt class="docutils literal">Viewer</tt> to the following
(including the quotes). If you have the compiled AutoHotkey script from above,
use the following instead (recommended):</p>
<pre class="code bat"><a name="rest_code_7a0d9b6e8908465ba61f6098f2558011-1"></a>SumatraPDF -inverse-search <span class="s2">"lyx-inverse-search.exe \"</span><span class="nv">%f</span>\<span class="s2">" \"</span><span class="nv">%l</span>\<span class="s2">""</span>
</pre>
<p>Otherwise, use:</p>
<pre class="code bat"><a name="rest_code_4befa81f83f24ac68b3233700033613c-1"></a>SumatraPDF -inverse-search <span class="s2">"lyxeditor.cmd \"</span><span class="nv">%f</span>\<span class="s2">" \"</span><span class="nv">%l</span>\<span class="s2">""</span>
</pre>
<p>Now, once you do to <tt class="docutils literal">Document</tt> -&gt; <tt class="docutils literal">View [PDF (pdflatex)]</tt> or <tt class="docutils literal">View Master Document</tt> in
LyX to compile your <tt class="docutils literal">.lyx</tt> file and invoke SumatraPDF to view the resulting
pdf, you can double-click on any text on the body of the pdf document to go to the
corresponding text in LyX.</p>
</div>
<div class="section" id="forward-search">
<h3>Forward Search</h3>
<p>In LyX, go to <tt class="docutils literal">Tools</tt> &gt; <tt class="docutils literal">Preferences</tt> &gt; <tt class="docutils literal">Output</tt>, and enter the following in
<tt class="docutils literal">PDF command</tt> under <tt class="docutils literal">Forward Search</tt> section:</p>
<pre class="code bat"><a name="rest_code_144e73aeeda746aaa9c87718381fefb2-1"></a>SumatraPDF -reuse-instance $$o -forward-search $$t $$n
</pre>
<p>Now, if you click on <tt class="docutils literal">Forward Search</tt> in the <tt class="docutils literal">Navigate</tt> menu in LyX, SumatraPDF
will scroll the pdf document to show the text corresponding to the text in LyX
where your cursor is and highlight the line.</p>
</div>
</div>
</div>
    </div>
    <aside class="postpromonav"><nav><ul itemprop="keywords" class="tags">
<li><a class="tag p-category" href="../categories/autohotkey.html" rel="tag">autohotkey</a></li>
            <li><a class="tag p-category" href="../categories/howto.html" rel="tag">howto</a></li>
            <li><a class="tag p-category" href="../categories/latex.html" rel="tag">latex</a></li>
            <li><a class="tag p-category" href="../categories/lyx.html" rel="tag">lyx</a></li>
            <li><a class="tag p-category" href="../categories/setting.html" rel="tag">setting</a></li>
            <li><a class="tag p-category" href="../categories/windows.html" rel="tag">windows</a></li>
        </ul>
<ul class="pager hidden-print">
<li class="previous">
                <a href="installing-gsl-and-cythongsl-in-windows.html" rel="prev" title="Installing GNU Scientific Library (GSL) and CythonGSL in Windows">Previous post</a>
            </li>
            <li class="next">
                <a href="toast-notifications-org-mode-windows.html" rel="next" title="Native desktop (toast) notifications for org-mode appointments in Windows">Next post</a>
            </li>
        </ul></nav></aside><section class="comments hidden-print"><h2>Comments</h2>
        
        
        <div id="disqus_thread"></div>
        <script>
        var disqus_shortname ="joon-blog",
            disqus_url="http://joonro.github.io/blog/posts/inverse-and-forward-search-lyx-windows.html",
        disqus_title="How to set up inverse and forward search in LyX for Windows",
        disqus_identifier="cache/posts/inverse-and-forward-search-lyx-windows.html",
        disqus_config = function () {
            this.language = "en";
        };
        (function() {
            var dsq = document.createElement('script'); dsq.async = true;
            dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
            (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
        })();
    </script><noscript>Please enable JavaScript to view the <a href="//disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a>
</noscript>
    <a href="//disqus.com" class="dsq-brlink" rel="nofollow">Comments powered by <span class="logo-disqus">Disqus</span></a>


        </section></article><script>var disqus_shortname="joon-blog";(function(){var a=document.createElement("script");a.async=true;a.src="//"+disqus_shortname+".disqus.com/count.js";(document.getElementsByTagName("head")[0]||document.getElementsByTagName("body")[0]).appendChild(a)}());</script>
</div>
        <!--End of body content-->

        <footer id="footer">
            Contents © 2016 <a href="mailto:joon.ro@outlook.com">Joon Ro</a> - Powered by <a href="http://getnikola.com" rel="nofollow">Nikola</a> 
            
        </footer>
</div>
</div>


            <script src="../assets/js/jquery.min.js"></script><script src="../assets/js/bootstrap.min.js"></script><script src="../assets/js/moment-with-locales.min.js"></script><script src="../assets/js/fancydates.js"></script><script src="../assets/js/jquery.colorbox-min.js"></script><script>$('a.image-reference:not(.islink) img:not(.islink)').parent().colorbox({rel:"gal",maxWidth:"100%",maxHeight:"100%",scalePhotos:true});</script><!-- fancy dates --><script>
    moment.locale("");
    fancydates(0, "YYYY-MM-DD HH:mm");
    </script><!-- end fancy dates -->
</body>
</html>
